# Fatima School Management System - Troubleshooting GuideTROUBLESHOOTING GUIDE - Port Conflict & Environment Error Fix

## Common Issues and Solutions===============================================================



---PROBLEM 1: Port 5000 already in use (Address already in use)

SOLUTION: Use Smart Launchers (RECOMMENDED)

## üö® **STARTUP ISSUES**

STEP 1: Use Smart Launcher (Best Solution)

### ‚ùå **Error: "Address already in use"**-----------------------------------------

**Problem**: Port 5000 is already occupied by another application1. Double-click "SmartStart.ps1" (PowerShell version - most reliable)

   OR

**Solution**:2. Double-click "SmartStart.bat" (Windows batch version)

1. Use **SmartStart.ps1** (automatically finds available port)

2. Alternative: Use **SmartStart.bat**These scripts will:

3. Manual fix: Set different port using `set ASPNETCORE_URLS=http://localhost:5001`‚úì Automatically detect available ports

‚úì Test ports 5000, 5001, 5002, 5202, 5203, etc.

**Prevention**: Always use smart launchers instead of manual startup‚úì Use the first available port

‚úì Show you the exact URL to use

---‚úì Open browser automatically when ready



### ‚ùå **Error: "FatimaSchoolManagement.exe not found"**STEP 2: Manual Port Selection

**Problem**: Application file missing or corrupted-----------------------------

If smart launchers don't work:

**Solution**:1. Open Command Prompt as Administrator

1. Verify `FatimaSchoolManagement.exe` exists in deployment folder2. Find what's using port 5000:

2. Check file permissions (right-click ‚Üí Properties ‚Üí Security)   netstat -ano | findstr :5000

3. Re-copy deployment folder if necessary3. Either stop that application or use different port

4. Run from correct directory4. Set custom port:

   set ASPNETCORE_URLS=http://localhost:5001

**Prevention**: Keep complete deployment folder intact   FatimaSchoolManagement.exe



---PROBLEM 2: Generic error page showing "Development Mode" message

SOLUTION: Follow these steps in order

### ‚ùå **Error: "Dynamic port binding not supported"**

**Problem**: Application trying to use localhost:0 for automatic port detectionSTEP 1: Use the Diagnostic Tool

------------------------------

**Solution**:1. Double-click "Diagnostic.bat"

1. Use **SmartStart.ps1** (handles this automatically)2. Review the output for any red ‚úó marks

2. Set specific port: `$env:ASPNETCORE_URLS="http://localhost:5001"`3. If database issues are found, they will be auto-fixed

3. Avoid using port 0 with localhost

STEP 2: Try PowerShell Version (RECOMMENDED)

**Technical Note**: Use 127.0.0.1:0 instead of localhost:0 for dynamic binding-------------------------------------------

1. Right-click "StartFatimaSchool.ps1"

---2. Select "Run with PowerShell"

3. If prompted, type "Y" to allow execution

## üíæ **DATABASE ISSUES**4. This version handles environment variables better



### ‚ùå **Error: "SQLite Error 1: 'no such table: Students'"**STEP 3: Manual Environment Setup

**Problem**: Database file exists but tables are missing or corrupted-------------------------------

1. Open Command Prompt as Administrator

**Solution**:2. Navigate to the deployment folder

1. **Close application completely**3. Run these commands:

2. **Delete `FatimaSchool.db`**   cd /d "C:\Path\To\Your\Deployment\Folder"

3. **Copy `FatimaSchool_Template.db` to `FatimaSchool.db`**   set ASPNETCORE_ENVIRONMENT=Development

4. **Restart application**   FatimaSchoolManagement.exe



**Command**:STEP 4: Alternative Port

```-----------------------

copy "FatimaSchool_Template.db" "FatimaSchool.db"If localhost:5000 doesn't work, try:

```- http://localhost:5202

- http://127.0.0.1:5000

**Prevention**: Regular database backups, don't manually edit database- http://127.0.0.1:5202



---STEP 5: Check Windows Security

-----------------------------

### ‚ùå **Error: "Database is locked"**1. Open Windows Defender

**Problem**: Multiple processes trying to access database simultaneously2. Add the deployment folder to exclusions

3. Temporarily disable real-time protection

**Solution**:4. Try running the application again

1. **Close all instances** of the application

2. **End any hanging processes** in Task ManagerSTEP 6: Reset Database (Last Resort)

3. **Wait 30 seconds**-----------------------------------

4. **Restart application**1. Delete "FatimaSchool.db" if it exists

2. Run "StartFatimaSchool.bat" again

**Prevention**: Close application properly, don't force-close3. Fresh database will be created from template



---COMMON CAUSES OF ERRORS:

- Port 5000 already in use (most common)

### ‚ùå **Error: "Database disk image is malformed"**- Environment variable not properly set

**Problem**: Database file is corrupted- Windows security blocking execution

- Corrupted database file

**Solution**:- Missing permissions

1. **Stop application**

2. **Restore from backup** if availableVERIFICATION STEPS:

3. **Or replace with template**: Copy `FatimaSchool_Template.db` to `FatimaSchool.db`1. Use SmartStart.ps1 for automatic port detection

4. **Restart application**2. Run Diagnostic.bat - should show all ‚úì marks

3. Application should start without port conflicts

**Data Recovery**:4. Browser should access the displayed URL

```sql5. Dashboard should load with school data

-- If partial recovery needed, use SQLite recovery tools

.recover FatimaSchool_recovered.dbIf none of these steps work, the issue may be:

```- Missing .NET runtime (self-contained should include this)

- Windows version compatibility

---- System permissions restrictions



## üåê **BROWSER & ACCESS ISSUES**Contact support with the output from Diagnostic.bat

==============================================
### ‚ùå **Page won't load / "This site can't be reached"**
**Problem**: Browser can't connect to application

**Solution**:
1. **Check application is running** (console window visible)
2. **Verify correct URL**: http://localhost:5001
3. **Try different browser** (Chrome, Edge, Firefox)
4. **Check Windows Firewall** settings
5. **Restart application and browser**

**URL Troubleshooting**:
- ‚úÖ http://localhost:5001 (correct)
- ‚ùå https://localhost:5001 (wrong - no HTTPS)
- ‚ùå http://localhost (missing port)

---

### ‚ùå **Browser shows "Development Error Page"**
**Problem**: Application error in development mode

**Solution**:
1. **Read error details** carefully
2. **Check database connection**
3. **Verify all required files exist**
4. **Restart application**
5. **Check environment variable**: `ASPNETCORE_ENVIRONMENT=Development`

---

### ‚ùå **Features not working (JavaScript errors)**
**Problem**: JavaScript disabled or browser compatibility

**Solution**:
1. **Enable JavaScript** in browser settings
2. **Clear browser cache** (Ctrl+Shift+Delete)
3. **Update browser** to latest version
4. **Try different browser**
5. **Disable browser extensions** temporarily

---

## üì∏ **PHOTO UPLOAD ISSUES**

### ‚ùå **Error: "File too large"**
**Problem**: Student photo exceeds 5MB limit

**Solution**:
1. **Resize image** using image editor
2. **Compress image** to reduce file size
3. **Use different format** (JPG instead of PNG)
4. **Recommended size**: 300x400 pixels

**Image Tools**:
- Windows Photos app (resize)
- Paint (save as different format)
- Online tools (compress images)

---

### ‚ùå **Error: "Invalid file type"**
**Problem**: Unsupported image format

**Solution**:
1. **Use supported formats**: JPG, JPEG, PNG, GIF
2. **Convert image** to supported format
3. **Check file extension** matches actual format

**Supported**: ‚úÖ .jpg, ‚úÖ .jpeg, ‚úÖ .png, ‚úÖ .gif  
**Not Supported**: ‚ùå .bmp, ‚ùå .tiff, ‚ùå .webp

---

### ‚ùå **Photos not displaying in reports**
**Problem**: Image path issues or missing files

**Solution**:
1. **Check `wwwroot/uploads` folder** exists
2. **Verify photo files** are in uploads folder
3. **Re-upload photos** if necessary
4. **Check file permissions**

---

## üñ®Ô∏è **PRINTING & REPORT ISSUES**

### ‚ùå **Reports print with wrong layout**
**Problem**: Incorrect printer settings or browser issues

**Solution**:
1. **Use Chrome or Edge** for printing
2. **Check page orientation**:
   - Report cards: Portrait
   - Mark sheets: Landscape
3. **Set paper size**: A4
4. **Print preview** before printing
5. **Adjust margins** if needed

---

### ‚ùå **"No data found" in reports**
**Problem**: Missing marks or incorrect term/year selection

**Solution**:
1. **Verify marks entered** for selected period
2. **Check term and year** selections
3. **Ensure students assigned** to selected class
4. **Enter missing assessments**

---

### ‚ùå **Excel export fails**
**Problem**: Large dataset or system memory issues

**Solution**:
1. **Export smaller data sets**
2. **Close other applications** to free memory
3. **Export by class** instead of all students
4. **Try CSV format** instead of Excel

---

## ‚ö° **PERFORMANCE ISSUES**

### ‚ùå **Application runs slowly**
**Problem**: System resources or large database

**Solution**:
1. **Close unnecessary applications**
2. **Check available RAM** (Task Manager)
3. **Restart application** periodically
4. **Clear browser cache**
5. **Check disk space** (minimum 1GB free)

---

### ‚ùå **Long loading times**
**Problem**: Large number of students or marks

**Solution**:
1. **Use pagination** in student lists
2. **Filter by class** instead of viewing all
3. **Archive old academic years**
4. **Restart application** daily

---

## üîß **SYSTEM MAINTENANCE**

### üìÖ **Weekly Maintenance**
1. **Backup database**: Copy `FatimaSchool.db`
2. **Backup photos**: Copy `wwwroot/uploads` folder
3. **Check disk space**: Ensure adequate free space
4. **Restart application**: Fresh start weekly

### üìÖ **Monthly Maintenance**
1. **Clean temporary files**: Delete browser cache
2. **Check system updates**: Windows updates
3. **Verify data accuracy**: Review student records
4. **Test backups**: Ensure backup files work

### üìÖ **Term-end Maintenance**
1. **Complete data backup**: Full system backup
2. **Archive old data**: Export previous term data
3. **Clean uploaded photos**: Remove unused images
4. **Performance check**: Monitor system speed

---

## üÜò **EMERGENCY PROCEDURES**

### üö® **Complete System Reset**
**When to use**: Major corruption, system completely broken

**Steps**:
1. **Close application**
2. **Backup current database** (if possible)
3. **Delete `FatimaSchool.db`**
4. **Copy `FatimaSchool_Template.db` to `FatimaSchool.db`**
5. **Clear `wwwroot/uploads` folder**
6. **Restart application**
7. **Re-enter current academic data**

---

### üö® **Data Recovery from Backup**
**When to use**: Data loss, database corruption

**Steps**:
1. **Close application**
2. **Replace `FatimaSchool.db` with backup**
3. **Replace `wwwroot/uploads` with backup photos**
4. **Restart application**
5. **Verify data integrity**

---

### üö® **Port Conflict Resolution**
**When to use**: Multiple applications need same port

**Manual Method**:
```powershell
# Find available ports
netstat -an | findstr :5000
netstat -an | findstr :5001
netstat -an | findstr :5002

# Set specific port
$env:ASPNETCORE_URLS="http://localhost:5002"
.\FatimaSchoolManagement.exe
```

---

## üìû **GETTING ADDITIONAL HELP**

### üîç **Diagnostic Information**
Run `Diagnostic.bat` to generate system information:
- System specifications
- Available ports
- File permissions
- Database status

### üìù **Error Reporting**
When reporting issues, include:
1. **Exact error message**
2. **Steps to reproduce**
3. **System information** (Windows version, RAM)
4. **Application version**
5. **Screenshot** of error (if applicable)

### üìö **Additional Resources**
- **USER_MANUAL.md**: Complete user guide
- **TECHNICAL_DOCUMENTATION.md**: Technical details
- **QUICK_REFERENCE.md**: Common operations

---

## üîÑ **Quick Command Reference**

### PowerShell Commands
```powershell
# Check if port is available
Test-NetConnection -ComputerName localhost -Port 5001

# Set environment variables
$env:ASPNETCORE_ENVIRONMENT="Development"
$env:ASPNETCORE_URLS="http://localhost:5001"

# Check running processes
Get-Process | Where-Object {$_.ProcessName -like "*Fatima*"}
```

### File Commands
```cmd
# Copy database template
copy "FatimaSchool_Template.db" "FatimaSchool.db"

# Check file exists
if exist "FatimaSchool.db" echo Database found

# Show file information
dir "FatimaSchool*.db"
```

---

*¬© 2024 Our Lady of Fatima Secondary School*  
*Troubleshooting Guide v2.0 - Solutions for common technical issues*

**Remember**: When in doubt, use SmartStart.ps1 - it handles most common issues automatically!